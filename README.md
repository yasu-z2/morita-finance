# 株価選別・AI分析システム (v3.2.2)

このプロジェクトは、東証プライム銘柄から「底値圏からの初動」を捉えるスクリーニング・システムです。目的に応じて2つの実行ファイルを用意しています。



---

## 📂 実行ファイルと機能比較

| 項目 | **AIメール配信版 (本番)** | **スタンドアロン版 (検証)** |
| :--- | :--- | :--- |
| **実行ファイル** | **`scanner_ai.py`** | **`scanner.py`** |
| **主な用途** | 毎晩の自動分析・チーム配信 | 手元でのロジック検証・詳細分析 |
| **出力形式** | AIレポート（メール） | CSV詳細リスト / TXTレポート |
| **AI分析** | あり (Gemini 1.5 Flash) | なし |
| **実行環境** | GitHub Actions (定時実行) | 自身のPC (ローカル実行) |
| **主な特徴** | 差分更新・キャッシュ機能搭載 | 全銘柄の生データ保存が可能 |

---

## 1. AIメール配信版 (`scanner_ai.py`)
GitHub Actionsを利用し、AIによる高度な投資戦略を自動配信するモードです。

### 特徴
- **AI W分析**: Geminiが「市場全体の俯瞰」と「個別銘柄の損切・指値戦略」を執筆。
- **高速スキャン**: キャッシュ機能により、前回実行時からの差分データのみを更新（約4分で完了）。
- **マルチ配信**: 複数の宛先（`TO_ADDRESS`）へ一斉送信。

---

## 2. スタンドアロン版 (`scanner.py`)
ローカル環境で実行し、スクリーニング結果の全容を詳細に把握するためのモードです。

### 特徴
- **CSV出力**: 抽出された全銘柄の計算データ（上昇率、指値、損切目安）を `Report_yyyymmdd.csv` に保存。
- **TXTレポート**: 人間が読みやすい形式の `Report_yyyymmdd.txt` を生成。
- **オフライン実行**: APIキー（Gemini）がなくても、株価判定ロジックのみを即座に走らせることが可能。

---

## ⚙️ 共通判定アルゴリズム (v1.11 安定版)
両ファイルとも、以下の厳格なフィルターを共通で使用しています。

### 第一段階（実戦モード）
- **底値圏**: 過去25日間の終値が、期間内安値から **+15%以内**。
- **初動**: 当日の終値が、期間内安値から **+10%以上** 上昇。
- **出来高**: 当日出来高が25日平均の **2.0倍以上**、かつ前日も **1.5倍以上**。
- **価格帯**: 投資金額（株価×100株）が **20万円以下**。

### 第二段階（特選・厳格モード）
- 第一段階よりさらにレンジを絞り（安値から **+10%以内**）、出来高が **2日連続2.0倍以上** を記録した銘柄。

---

## 🛠 GitHub Secrets 設定 (AI配信版用)
自動配信を有効にするには、GitHubの `Settings > Secrets` に以下を登録してください。

- `GEMINI_API_KEY`: Google AI APIキー
- `MAIL_ADDRESS`: 送信元Gmail
- `MAIL_PASSWORD`: Gmailアプリパスワード
- `TO_ADDRESS`: 送信先（カンマ区切りで複数可）

---

## 📝 免責事項
本システムは投資の参考情報の提供を目的としており、特定の銘柄の売買を推奨するものではありません。投資判断は自己責任でお願いいたします。