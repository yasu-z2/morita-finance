# 株価選別・AI分析システム (v3.2.3)

東証プライム銘柄から「底値圏からの初動」を捉えるスクリーニング・システムです。
2026年最新の **Gemini 2.5 Flash** を搭載し、高速かつ精度の高い投資戦略レポートを自動生成します。

## 📂 構成ファイルと実行モード

本システムは、用途に合わせて2つの実行ファイルを使い分けることができます。

| 項目 | **AIメール配信版 (本番)** | **スタンドアロン版 (検証)** |
| :--- | :--- | :--- |
| **ファイル名** | **`scanner_ai.py`** | **`scanner_standalone.py`** |
| **主な用途** | 毎晩の自動分析・チームへの一斉配信 | ローカルでのロジック検証・詳細保存 |
| **AIモデル** | **Gemini 2.5 Flash (最新安定版)** | なし (ロジック判定のみ) |
| **出力形式** | AIレポート（メール本文） | CSV詳細リスト / TXTレポート |
| **実行環境** | GitHub Actions (定時実行) | ローカルPC (手動実行) |

---

## 🚀 主な機能

### 1. 最新AIによるW分析 (Gemini 2.5 Flash)
Googleの最新モデル **Gemini 2.5 Flash** を採用。
- **市場俯瞰**: 抽出銘柄に共通するセクター動向や市場背景を鋭く分析。
- **個別戦略**: 具体的な指値・損切り目安など、実戦的なトレードシナリオを提示。

### 2. 高速化とマルチ配信
- **差分キャッシュ**: GitHub Actionsのキャッシュ機能を利用し、前日からの差分のみを取得。約4分で全プライム銘柄を走査。
- **一斉配信**: `TO_ADDRESS` に登録された複数のメールアドレスへ、プロのアナリスト級レポートを毎晩お届けします。

---

## ⚙️ 判定アルゴリズム (v1.11 準拠)

両モード共通の厳格な「2段階フィルター」を採用しています。

### 【第一段階】実戦モード
- **底値圏**: 過去25日間の終値が、期間内安値から **+15%以内**。
- **初動**: 当日終値が安値から **+10%以上** 上昇。
- **出来高**: 当日2.0倍以上、かつ前日1.5倍以上の急増。

### 【第二段階】特選・厳格モード
- 底値レンジを **+10%以内** に絞り込み、出来高が **2日連続2.0倍以上** を記録した「本命中の本命」銘柄。
- 該当がない場合はレポートに「該当なし」と明記。

---

## 🛠 セットアップ (GitHub Secrets)

自動配信（`scanner_ai.py`）を使用する場合、GitHubのリポジトリ設定から以下のSecretsを登録してください。

- `GEMINI_API_KEY`: Google AI APIキー
- `MAIL_ADDRESS`: 送信元Gmail（アプリパスワード使用）
- `MAIL_PASSWORD`: Gmailアプリパスワード
- `TO_ADDRESS`: 送信先（カンマ区切りで複数指定可能）

---

## 📝 免責事項
本システムは投資の参考情報の提供を目的としており、特定の銘柄の売買を推奨するものではありません。投資判断は自己責任でお願いいたします。